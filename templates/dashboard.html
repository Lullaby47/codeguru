{% extends "base.html" %}

{% block content %}

<div class="dashboard-wrap">

    <div class="dashboard-panel">
        <div class="dashboard-card">

            <div class="dashboard-welcome">
                Welcome back,<br>{{ username }}
            </div>

            <div class="dashboard-sub">
                This is your journey. One challenge at a time.
            </div>

            {% if error_message %}
            <div class="alert alert-error">
                ⚠️ {{ error_message }}
            </div>
            {% endif %}

            <div class="dashboard-cards">
                <div class="dashboard-card-item dashboard-card-item-levels">
                    <div class="dashboard-card-label">CATEGORY LEVELS</div>
                    <div class="dashboard-levels-container">
                        {% if category_levels and category_levels|length > 0 %}
                            {% for item in category_levels[:3] %}
                            <div class="dashboard-level-item">({{ item.main_category }}) - (Level {{ item.level }})</div>
                            {% endfor %}
                            {% if category_levels|length > 3 %}
                            <div class="dashboard-level-viewall"><a href="/challenge">View all</a></div>
                            {% endif %}
                        {% else %}
                            <div class="dashboard-level-empty">No categories yet</div>
                        {% endif %}
                    </div>
                </div>

                <div class="dashboard-card-item">
                    <div class="dashboard-card-label">STREAK</div>
                    <div class="dashboard-card-value">{{ streak }}</div>
                </div>

                <div class="dashboard-card-item">
                    <div class="dashboard-card-label">VERIFIED</div>
                    <div class="dashboard-card-value">
                        {{ "Yes" if verified else "No" }}
                    </div>
                </div>
            </div>

            <a href="/challenge" class="dashboard-cta">
                ⚔️ Enter Today's Challenge
            </a>

            <div class="dashboard-hint">
                Complete today's challenge to grow stronger.
            </div>

        </div>
    </div>

</div>

{% endblock %}
